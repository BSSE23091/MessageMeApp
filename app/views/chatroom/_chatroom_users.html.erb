<div class="ui fluid raised card">
  <div class="content">
    <h3 class="ui header">
      <i class="users icon"></i>
      <div class="content">
        All Users
        <div class="sub header">Add users as friends to message them</div>
      </div>
    </h3>
  </div>
  <div class="content">
    <% if @users.any? %>
      <div class="ui relaxed divided list">
        <% @users.each do |user| %>
          <% is_friend = current_user.friend_with?(user) %>
          <div class="item">
            <div class="right floated content mobile-hidden">
              <% if is_friend %>
                <span class="ui green label">
                  <i class="check icon"></i> Friend
                </span>
                <%= button_to "Remove Friend", friendship_path(user), method: :delete, 
                    class: "ui small red button", 
                    form: { style: "display: inline-block; margin-left: 10px;" } %>
              <% else %>
                <%= form_with url: friendships_path, method: :post, local: true, 
                    html: { class: "ui form", style: "display: inline-block;" } do |f| %>
                  <%= hidden_field_tag :friend_id, user.id %>
                  <%= f.submit "Add Friend", class: "ui small orange button" %>
                <% end %>
              <% end %>
            </div>
            <i class="user icon"></i>
            <div class="content">
              <div class="header"><%= user.username %></div>
              <div class="mobile-only" style="margin-top: 10px;">
                <% if is_friend %>
                  <span class="ui green label">
                    <i class="check icon"></i> Friend
                  </span>
                  <%= button_to "Remove Friend", friendship_path(user), method: :delete, 
                      class: "ui small red button", 
                      form: { style: "display: inline-block; margin-left: 10px;" } %>
                <% else %>
                  <%= form_with url: friendships_path, method: :post, local: true, 
                      html: { class: "ui form", style: "display: inline-block;" } do |f| %>
                    <%= hidden_field_tag :friend_id, user.id %>
                    <%= f.submit "Add Friend", class: "ui small orange button" %>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="ui message">
        <div class="header">No other users found</div>
        <p>You're the only user registered!</p>
      </div>
    <% end %>
  </div>
</div>

